# ========== MiniQuantDesk .env.example ==========
# Mode: BACKTEST | PAPER | LIVE
MODE=BACKTEST
PYTHONUTF8=1

# ---- Time / Locale ----
USER_TIMEZONE=America/New_York

# ---- Discord inbound control (optional) ----
DISCORD_BOT_TOKEN=
DISCORD_KILL_CHANNEL_ID=
DISCORD_KILL_PHRASE=!kill

# ---- Discord outbound webhooks ----
DISCORD_WEBHOOK=                            # optional global fallback
DISCORD_WEBHOOK_BACKTEST=
DISCORD_WEBHOOK_PAPER=
DISCORD_WEBHOOK_LIVE=

# Heartbeat channels: bot will prefer these if present
DISCORD_WEBHOOK_HEARTBEAT=
DISCORD_WEBHOOK_HEARTBEAT_PAPER=
DISCORD_WEBHOOK_HEARTBEAT_LIVE=
# Legacy/alt names used by a helper (kept for compatibility)
DISCORD_HEARTBEAT_WEBHOOK=
DISCORD_HEARTBEAT_WEBHOOK_PAPER=
DISCORD_HEARTBEAT_WEBHOOK_LIVE=

# ---- External kill switches (optional) ----
KILL_FILE=                                  # e.g., C:\path\to\kill.txt (contains word 'kill')
KILL_URL=                                   # e.g., https://example.com/kill.txt

# ---- Alpaca credentials ----
APCA_API_KEY_ID_PAPER=
APCA_API_SECRET_KEY_PAPER=
APCA_PAPER_BASE_URL=https://paper-api.alpaca.markets

APCA_API_KEY_ID_LIVE=
APCA_API_SECRET_KEY_LIVE=
APCA_LIVE_BASE_URL=https://api.alpaca.markets

# ---- Strategy / Universe ----
SYMBOLS=TSLA,NVDA,AMD
TAKE_PROFIT_PCT=0.05
STOP_LOSS_PCT=0.02
RISK_PER_TRADE=0.01
SMA_FAST=5
SMA_SLOW=20
RSI_PERIOD=14
RSI_MIN_BUY=45
RSI_MAX_SELL=70

# ---- Backtest knobs ----
BACKTEST_INTERVAL=1Day                      # 1Min | 1Day
BACKTEST_LOOKBACK_DAYS=120
BACKTEST_PASSES=3
BACKTEST_TARGET_TRADES_PER_SYMBOL=100
BACKTEST_MAX_PASSES=50
BACKTEST_STARTING_EQUITY=100000
BACKTEST_GLOBAL_SINGLE_POSITION=false

# ---- Paper / Live behavior ----
PAPER_GLOBAL_SINGLE_POSITION=true
LIVE_GLOBAL_SINGLE_POSITION=true
PAPER_DRY_RUN=false                         # if true, simulate fills off-hours in PAPER

# ---- Risk guardrails ----
DAILY_LOSS_LIMIT_PCT=0.02                   # 2% daily drawdown
WEEKLY_LOSS_LIMIT_PCT=0.05                  # 5% weekly drawdown
FLATTEN_ON_RISK_BREACH=true                 # auto-flatten all positions on breach

LIVE_FLATTEN_AT_CLOSE=false                 # if true, auto-flatten before close (LIVE)
LIVE_FLATTEN_MINUTES_BEFORE_CLOSE=5

# ---- Market hours / notifications ----
TRADE_EXTENDED_HOURS=false
MARKET_SLEEP_BUFFER_SECONDS=15
MARKET_CLOSED_NOTIFY=true
MARKET_CLOSED_INTERVAL_MIN=120
MARKET_CLOSED_FINAL_MINUTES=60,30,15

# Heartbeats (minutes)
HEARTBEAT_OPEN_MIN=60
HEARTBEAT_CLOSED_MIN=240
HEARTBEAT_LOG=ml_sidecar/logs/heartbeat.log

# ---- Paths / Logging ----
LOG_DIR=ml_sidecar/logs
DATA_DIR=ml_sidecar/data/ml

# ---- Sidecar / Event bus ----
BUS_BIND=tcp://127.0.0.1:5557
PARQUET_ROW_GROUP=5000
SIDECAR_LOG=ml_sidecar/logs/sidecar.log

# ---- ML metadata (emitted with feature snapshots) ----
FEATURE_VERSION=f1.0
STRATEGY_VERSION=s1.0
MODEL_VERSION=none
# =====================================================
